:root {
    --bg: #0b0d10;
    --panel: #151a21;
    --muted: #9096a3;
    --text: #e8ecf2;
    --accent: #4fd1c5;
    --accent2: #ff6b6b;
    --grid: #222832;
    --ok: #8be28b;

    --cell: 48px;

    /* эффекты */
    --radius: 12px;
    --shadow: 0 10px 30px rgba(0, 0, 0, 0.35), 0 2px 8px rgba(0, 0, 0, 0.25);
    --inner-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.03),
        inset 0 -1px 0 rgba(0, 0, 0, 0.4);
    --ring: 0 0 0 2px rgba(79, 209, 197, 0.35);
    --dur: 0.18s;
    --bezier: cubic-bezier(0.22, 0.61, 0.36, 1);
}

* {
    box-sizing: border-box;
}
:focus {
    outline: none;
}
:focus-visible {
    border-color: rgba(79, 209, 197, 0.5);
    box-shadow: var(--ring);
}

body {
    margin: 0;
    color: var(--text);
    background: var(--bg);

    /* лёгкая фактура фона */
    background-image: radial-gradient(
            1200px 800px at 10% -10%,
            rgba(79, 209, 197, 0.08),
            transparent 60%
        ),
        radial-gradient(
            1000px 600px at 110% 10%,
            rgba(255, 107, 107, 0.07),
            transparent 60%
        );
    background-attachment: fixed;
    font: 14px/1.4 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
        Arial;
}

h1 {
    margin: 0 0 8px;
    letter-spacing: 0.2px;
    font-size: 18px;
}

.container {
    display: grid;
    max-width: 1100px;
    padding: 0 16px;
    margin: 24px auto;
    transition: max-width var(--dur) var(--bezier);
    gap: 16px;
}

.panel {
    position: relative;
    padding: 12px;
    border: 1px solid var(--grid);
    border-radius: var(--radius);
    background: rgba(21, 26, 33, 0.82);
    box-shadow: var(--shadow);
    transition: transform var(--dur) var(--bezier),
        box-shadow var(--dur) var(--bezier), background var(--dur) var(--bezier);
    backdrop-filter: saturate(120%) blur(6px);
}
.panel:hover {
    transform: translateY(-1px);
}
.panel::after {
    position: absolute;
    border-radius: inherit;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.04);
    /* тонкая светящаяся линия сверху */
    content: "";
    pointer-events: none;
    inset: 0;
}

.row {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px;
}

/* --- игровое поле --- */
.grid {
    display: grid;
    justify-content: center;
    grid-template-columns: repeat(5, var(--cell));
    gap: 6px;
}
.cell {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--cell);
    height: var(--cell);
    border: 1px solid var(--grid);
    border-radius: 8px;
    background: #0f141a;
    box-shadow: var(--inner-shadow), 0 2px 6px rgba(0, 0, 0, 0.3);
    cursor: pointer;
    user-select: none;
    transition: transform var(--dur) var(--bezier),
        box-shadow var(--dur) var(--bezier), background var(--dur) var(--bezier),
        color var(--dur) var(--bezier);
    font-size: calc(var(--cell) * 0.42);
    font-weight: 700;
    touch-action: manipulation;
}
@media (hover: hover) {
    .cell:hover {
        box-shadow: var(--inner-shadow), 0 6px 16px rgba(0, 0, 0, 0.35);
        transform: translateY(-1px);
    }
}
.cell.empty {
    opacity: 0.6;
}

/* подсветка маршрута */
@keyframes glow {
    0% {
        box-shadow: 0 0 0 0 rgba(79, 209, 197, 0.55),
            0 0 0 0 rgba(79, 209, 197, 0.25);
    }
    70% {
        box-shadow: 0 0 0 6px rgba(79, 209, 197, 0),
            0 0 0 12px rgba(79, 209, 197, 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(79, 209, 197, 0), 0 0 0 0 rgba(79, 209, 197, 0);
    }
}
.cell.path {
    outline: 2px solid var(--accent);
    animation: glow 1.6s ease-out infinite;
}

/* вставленная буква */
@keyframes pop {
    0% {
        transform: scale(0.9);
    }
    60% {
        transform: scale(1.04);
    }
    100% {
        transform: scale(1);
    }
}
.cell.insert {
    color: #000;
    background: linear-gradient(180deg, #ff6b6b, #ff5a5a);
    box-shadow: 0 6px 18px rgba(255, 107, 107, 0.35);
    animation: pop 0.22s var(--bezier);
}

/* --- формы и кнопки --- */
input,
textarea,
button,
select {
    padding: 10px;
    border: 1px solid var(--grid);
    border-radius: 10px;
    color: var(--text);
    background: #0e1319;
    transition: border-color var(--dur) var(--bezier),
        box-shadow var(--dur) var(--bezier), transform var(--dur) var(--bezier),
        background var(--dur) var(--bezier);
}
input::placeholder,
textarea::placeholder {
    color: #6f7686;
}
input:hover,
textarea:hover {
    border-color: #2b3340;
}
input:focus,
textarea:focus {
    border-color: rgba(79, 209, 197, 0.5);
    box-shadow: var(--ring);
}

button {
    border: 1px solid rgba(79, 209, 197, 0.35);
    background: linear-gradient(
        180deg,
        rgba(79, 209, 197, 0.22),
        rgba(79, 209, 197, 0.08)
    );
    box-shadow: 0 6px 16px rgba(79, 209, 197, 0.12);
    cursor: pointer;
    letter-spacing: 0.2px;
    font-weight: 700;
}
@media (hover: hover) {
    button:hover {
        box-shadow: 0 10px 26px rgba(79, 209, 197, 0.16);
        transform: translateY(-1px);
    }
}
button:active {
    transform: translateY(1px);
}

/* --- клавиатура --- */
.keyboard {
    display: grid;
    grid-template-columns: repeat(11, 1fr);
    gap: 6px;
}
.key {
    position: relative;
    min-height: 42px;
    padding: 10px;
    border: 1px solid var(--grid);
    border-radius: 10px;
    background: #0e1319;
    box-shadow: var(--inner-shadow), 0 3px 8px rgba(0, 0, 0, 0.28);
    transition: transform var(--dur) var(--bezier),
        box-shadow var(--dur) var(--bezier), background var(--dur) var(--bezier),
        color var(--dur) var(--bezier);
    text-align: center;
    font-weight: 700;
}
@media (hover: hover) {
    .key:hover {
        box-shadow: var(--inner-shadow), 0 8px 16px rgba(0, 0, 0, 0.35);
        transform: translateY(-1px);
    }
}
.key:active {
    transform: translateY(1px) scale(0.98);
}
.key.active {
    border-color: rgba(79, 209, 197, 0.6);
    color: #000;
    background: linear-gradient(180deg, var(--accent), #3fbfb5);
}

/* ripple эффект на тап */
.key::after {
    position: absolute;
    border-radius: inherit;
    opacity: 0;
    background: radial-gradient(
        120px 120px at var(--x, 50%) var(--y, 50%),
        rgba(255, 255, 255, 0.18),
        transparent 40%
    );
    content: "";
    transition: opacity 0.35s ease;
    pointer-events: none;
    inset: 0;
}
.key:active::after {
    opacity: 1;
}
/* JS не трогаем: используем пользовательские координаты через CSS vars при клике, но и без них центр ок */

/* --- список подсказок --- */
.suggestions {
    overflow: auto;
    max-height: 280px;
    border: 1px solid var(--grid);
    border-radius: 10px;
    background: linear-gradient(
        180deg,
        rgba(16, 21, 28, 0.6),
        rgba(16, 21, 28, 0.4)
    );
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.03);
    scrollbar-width: thin;
    scrollbar-color: #2a3240 transparent;
}
.suggestions::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}
.suggestions::-webkit-scrollbar-thumb {
    border-radius: 10px;
    background: #2a3240;
}
.suggestions::-webkit-scrollbar-thumb:hover {
    background: #344055;
}

.suggestion {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 12px;
    border-bottom: 1px solid var(--grid);
    transition: background var(--dur) var(--bezier),
        transform var(--dur) var(--bezier);
}
.suggestion:last-child {
    border-bottom: none;
}
@media (hover: hover) {
    .suggestion:hover {
        background: rgba(79, 209, 197, 0.08);
    }
}
/* активный элемент (когда есть кнопка «Применить») — подсветим без JS */
.suggestion:has(button) {
    background: rgba(79, 209, 197, 0.06);
}
.suggestion:has(button) b {
    color: var(--accent);
}

.badge {
    padding: 2px 8px;
    border: 1px solid var(--grid);
    border-radius: 999px;
    color: var(--muted);
    background: #10151c;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.03);
    font-size: 12px;
}

/* разделитель */
hr {
    margin: 8px 0;
    border: none;
    border-top: 1px solid var(--grid);
}
label {
    color: var(--muted);
    font-size: 12px;
}

/* ---------- Мобильная адаптация ---------- */
@media (max-width: 900px) {
    .container {
        padding: 0 12px;
    }
    :root {
        --cell: clamp(40px, 9.5vw, 56px);
    }
    .keyboard {
        grid-template-columns: repeat(8, 1fr);
    }
    .key {
        min-height: 44px;
        font-size: 16px;
    }
    .panel {
        padding: 10px;
    }
    h1 {
        font-size: 16px;
    }
    .suggestions {
        max-height: 40vh;
    }
    input,
    textarea,
    button,
    select {
        font-size: 16px;
    }
    button {
        width: 100%;
    }
    .row {
        gap: 10px;
    }
}
@media (max-width: 600px) {
    .container {
        margin: 16px auto;
        gap: 12px;
    }
    :root {
        --cell: clamp(38px, 16vw, 52px);
    }
    .grid {
        gap: 5px;
    }
    .cell {
        border-radius: 10px;
        font-size: calc(var(--cell) * 0.44);
    }
    .cell.path {
        outline-width: 3px;
    }
    .keyboard {
        grid-template-columns: repeat(6, 1fr);
        gap: 6px;
    }
    .key {
        min-height: 48px;
        font-size: 18px;
    }
    .suggestions {
        max-height: 35vh;
    }
    .row {
        align-items: stretch;
        flex-direction: column;
    }
    .row > * {
        width: 100%;
    }
    .panel label {
        display: block;
        margin-bottom: 4px;
    }
}
@media (max-width: 380px) {
    :root {
        --cell: clamp(34px, 18vw, 46px);
    }
    .key {
        min-height: 46px;
        font-size: 17px;
    }
    h1 {
        font-size: 15px;
    }
}

/* ---------- Десктопная раскладка ---------- */
@media (min-width: 1100px) {
    /* мобильная колонка-стек */
    @media (max-width: 900px) {
        .main-row {
            flex-direction: column;
        }
        .left-col,
        .right-col {
            min-width: 0;
        }
        .left-col .panel,
        .right-col .panel {
            min-height: 0; /* на мобилках пусть высота адаптивная */
        }
    }
    :root {
        --cell: 80px !important; /* побольше клетки */
    }
    /* ----- Простая раскладка без grid ----- */
    .container {
        max-width: 1200px;
        padding: 0 16px;
        margin: 24px auto;
    }

    /* шапка */
    .header-bar {
        margin-bottom: 16px;
    }

    /* основная строка: 2 колонки */
    .main-row {
        display: flex;
        align-items: flex-start;
        margin-bottom: 16px;
        gap: 16px;
    }

    /* колонки — по половине, но не уже 360px */
    .left-col,
    .right-col {
        flex: 1 1 0;
        min-width: 360px;
    }

    /* делаем основные панели чуть выше и ровнее */
    .left-col .panel,
    .right-col .panel {
        display: flex;
        flex-direction: column;
        min-height: 620px; /* «чуть выше» */
    }

    /* нижняя панель с textarea */
    .blacklist-panel {
        margin-top: 8px;
    }

    /* список: около 10 строк + скролл */
    :root {
        --row: 40px;
    }
    .suggestions-10rows {
        overflow-y: auto;
        max-height: calc(var(--row) * 10);
        margin-top: 10px;
    }
    .suggestions-10rows .suggestion {
        display: grid;
        align-items: center;
        height: var(--row);
        padding: 0 10px;
        grid-template-columns: 1fr auto;
        column-gap: 8px;
    }

    .suggestion-word {
        font-size: 20px;
        font-weight: 600;
    }
}

@media (max-width: 900px) {
    .main-row {
        flex-direction: column;
    }
    .left-col,
    .right-col {
        min-width: 0;
    }
    .left-col .panel,
    .right-col .panel {
        min-height: 0; /* на мобилках пусть высота адаптивная */
    }
}

/* большие экраны */
@media (min-width: 1440px) {
    :root {
        --cell: 80px !important;
    }
    .container {
        max-width: 1400px;
    }
    :root {
        --cell: 56px;
    }
}

/* уважение к сниженной анимации */
@media (prefers-reduced-motion: reduce) {
    * {
        transition: none !important;
        animation: none !important;
    }
}

/* Мягкое появление пути + уже существующее свечение */
@keyframes pathFade {
    from {
        opacity: 0.3;
        transform: scale(0.96);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}
/* комбинируем две анимации: fade и свечение */
.cell.path {
    animation: pathFade 0.18s var(--bezier) both, glow 1.6s ease-out infinite;
}

/* Подсветка совпадений в быстром поиске */
mark.hl {
    padding: 0 2px;
    border-radius: 4px;
    color: var(--text);
    background: rgba(79, 209, 197, 0.22);
}

/* Рипл уже есть в .key::after — этот блок просто напоминание:
   координаты устанавливаются JS-обработчиком в App.tsx */

.option-buttons {
    display: flex;
    justify-content: space-between;
}

.no-word {
    color: #000;
    background: linear-gradient(180deg, #4fd1c5, #3fbfb5);
    box-shadow: 0 6px 16px rgba(79, 209, 197, 0.35);
}

.delete-letter {
    color: #fff;
    background: linear-gradient(180deg, #804949, #ee5959);
    box-shadow: 0 6px 16px rgba(255, 107, 107, 0.35);
}

.delete-letter.active {
    border-color: rgba(255, 107, 107, 0.6);
    /* когда режим удаления включён — сделаем заметнее */
    background: linear-gradient(180deg, #ee5959, #c93f3f);
    box-shadow: 0 8px 20px rgba(255, 107, 107, 0.45);
}

/* --- клавиатура: QWERTY со сдвигами --- */
/* выключаем grid у .keyboard, когда используется QWERTY */
.keyboard.keyboard-qwerty {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

/* ряд клавиш */
.kb-row {
    display: flex;
    gap: 6px;
}

/* размеры клавиш чуть стабильнее для красивого “шага” */
.key {
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 44px; /* добавили фикс. ширину */
    min-height: 44px; /* осталось красиво на десктопе */
}

/* сдвиги, имитирующие реальную раскладку */
.kb-row.row-2 {
    margin-left: 22px;
} /* половина ширины + зазор */
.kb-row.row-3 {
    margin-left: 44px;
} /* полная ширина одного кейка */

/* ховеры/рипл/active у тебя уже описаны — остаются прежними */

/* мобильная адаптация: уменьшим шаги */
@media (max-width: 600px) {
    .key {
        min-width: 40px;
        min-height: 48px;
    }
    .kb-row.row-2 {
        margin-left: 16px;
    }
    .kb-row.row-3 {
        margin-left: 32px;
    }
}

/* очень узкие экраны — ещё компактнее */
@media (max-width: 380px) {
    .key {
        min-width: 36px;
        min-height: 46px;
    }
    .kb-row.row-2 {
        margin-left: 12px;
    }
    .kb-row.row-3 {
        margin-left: 24px;
    }
}

/* крупные экраны — больше клавиши и шаг */
@media (min-width: 1100px) {
    .key {
        min-width: 48px;
        min-height: 48px;
    }
    .kb-row.row-2 {
        margin-left: 24px;
    }
    .kb-row.row-3 {
        margin-left: 48px;
    }
}

/* --- Welcome start cells (Wordle-like) --- */
.start-cells {
    display: flex;
    justify-content: center;
    margin: 12px 0 16px;
    gap: 10px;
}

.start-cell {
    width: 56px;
    height: 56px;
    border: 2px solid var(--grid);
    border-radius: 10px;
    color: var(--text);
    background: #0f141a;
    box-shadow: var(--inner-shadow), 0 4px 12px rgba(0, 0, 0, 0.28);
    transition: transform var(--dur) var(--bezier),
        border-color var(--dur) var(--bezier),
        box-shadow var(--dur) var(--bezier), background var(--dur) var(--bezier);
    text-align: center;
    text-transform: uppercase;
    font-size: 26px;
    font-weight: 800;
}

.start-cell:hover {
    border-color: #2b3340;
}

.start-cell:focus {
    border-color: rgba(79, 209, 197, 0.6);
    box-shadow: var(--ring), var(--inner-shadow);
}

/* "поп" при заполнении */
@keyframes startPop {
    0% {
        transform: scale(0.92);
    }
    60% {
        transform: scale(1.06);
    }
    100% {
        transform: scale(1);
    }
}
.start-cell.filled {
    background: #101820;
    animation: startPop 0.18s var(--bezier);
}

/* лёгкая подсветка каретки */
.start-cell:focus:not(.filled) {
    background: linear-gradient(180deg, #0f141a, #0e1319);
}

/* шейк при ошибке */
@keyframes startShake {
    0%,
    100% {
        transform: translateX(0);
    }
    20% {
        transform: translateX(-6px);
    }
    40% {
        transform: translateX(6px);
    }
    60% {
        transform: translateX(-4px);
    }
    80% {
        transform: translateX(4px);
    }
}
.start-cells.shake {
    animation: startShake 0.32s ease;
}

/* кнопка старта */
.start-button {
    padding: 10px 22px;
    border: 1px solid rgba(79, 209, 197, 0.35);
    border-radius: 12px;
    background: linear-gradient(
        180deg,
        rgba(79, 209, 197, 0.22),
        rgba(79, 209, 197, 0.08)
    );
    box-shadow: 0 6px 16px rgba(79, 209, 197, 0.12);
    transition: transform var(--dur) var(--bezier),
        box-shadow var(--dur) var(--bezier), opacity var(--dur) var(--bezier);
    letter-spacing: 0.2px;
    font-weight: 800;
}
.start-button.ok {
    /* чуть ярче, когда валидно */
    border-color: rgba(79, 209, 197, 0.6);
    box-shadow: 0 8px 20px rgba(79, 209, 197, 0.18);
}
.start-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}
@media (hover: hover) {
    .start-button.ok:hover {
        box-shadow: 0 12px 28px rgba(79, 209, 197, 0.22);
        transform: translateY(-1px);
    }
}
